{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"windowFeatures\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { useCallback, useMemo, useEffect, useState } from 'react';\nimport { AuthRequest } from \"./AuthRequest\";\nimport { resolveDiscoveryAsync } from \"./Discovery\";\nexport function useAutoDiscovery(issuerOrDiscovery) {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    discovery = _useState2[0],\n    setDiscovery = _useState2[1];\n  useEffect(function () {\n    var isAllowed = true;\n    resolveDiscoveryAsync(issuerOrDiscovery).then(function (discovery) {\n      if (isAllowed) {\n        setDiscovery(discovery);\n      }\n    });\n    return function () {\n      isAllowed = false;\n    };\n  }, [issuerOrDiscovery]);\n  return discovery;\n}\nexport function useLoadedAuthRequest(config, discovery, AuthRequestInstance) {\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    request = _useState4[0],\n    setRequest = _useState4[1];\n  var scopeString = useMemo(function () {\n    var _config$scopes;\n    return (_config$scopes = config.scopes) == null ? void 0 : _config$scopes.join(',');\n  }, [config.scopes]);\n  var extraParamsString = useMemo(function () {\n    return JSON.stringify(config.extraParams || {});\n  }, [config.extraParams]);\n  useEffect(function () {\n    var isMounted = true;\n    if (discovery) {\n      var _request = new AuthRequestInstance(config);\n      _request.makeAuthUrlAsync(discovery).then(function () {\n        if (isMounted) {\n          setRequest(_request);\n        }\n      });\n    }\n    return function () {\n      isMounted = false;\n    };\n  }, [discovery == null ? void 0 : discovery.authorizationEndpoint, config.clientId, config.redirectUri, config.responseType, config.prompt, config.clientSecret, config.codeChallenge, config.state, config.usePKCE, scopeString, extraParamsString]);\n  return request;\n}\nexport function useAuthRequestResult(request, discovery) {\n  var customOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    result = _useState6[0],\n    setResult = _useState6[1];\n  var promptAsync = useCallback(_asyncToGenerator(function* () {\n    var _customOptions$window;\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var _ref$windowFeatures = _ref.windowFeatures,\n      windowFeatures = _ref$windowFeatures === void 0 ? {} : _ref$windowFeatures,\n      options = _objectWithoutProperties(_ref, _excluded);\n    if (!discovery || !request) {\n      throw new Error('Cannot prompt to authenticate until the request has finished loading.');\n    }\n    var inputOptions = _objectSpread(_objectSpread(_objectSpread({}, customOptions), options), {}, {\n      windowFeatures: _objectSpread(_objectSpread({}, (_customOptions$window = customOptions.windowFeatures) != null ? _customOptions$window : {}), windowFeatures)\n    });\n    var result = yield request == null ? void 0 : request.promptAsync(discovery, inputOptions);\n    setResult(result);\n    return result;\n  }), [request == null ? void 0 : request.url, discovery == null ? void 0 : discovery.authorizationEndpoint]);\n  return [result, promptAsync];\n}\nexport function useAuthRequest(config, discovery) {\n  var request = useLoadedAuthRequest(config, discovery, AuthRequest);\n  var _useAuthRequestResult = useAuthRequestResult(request, discovery),\n    _useAuthRequestResult2 = _slicedToArray(_useAuthRequestResult, 2),\n    result = _useAuthRequestResult2[0],\n    promptAsync = _useAuthRequestResult2[1];\n  return [request, result, promptAsync];\n}","map":{"version":3,"names":["useCallback","useMemo","useEffect","useState","AuthRequest","resolveDiscoveryAsync","useAutoDiscovery","issuerOrDiscovery","_useState","_useState2","_slicedToArray","discovery","setDiscovery","isAllowed","then","useLoadedAuthRequest","config","AuthRequestInstance","_useState3","_useState4","request","setRequest","scopeString","_config$scopes","scopes","join","extraParamsString","JSON","stringify","extraParams","isMounted","makeAuthUrlAsync","authorizationEndpoint","clientId","redirectUri","responseType","prompt","clientSecret","codeChallenge","state","usePKCE","useAuthRequestResult","customOptions","arguments","length","undefined","_useState5","_useState6","result","setResult","promptAsync","_asyncToGenerator","_customOptions$window","_ref","_ref$windowFeatures","windowFeatures","options","_objectWithoutProperties","_excluded","Error","inputOptions","_objectSpread","url","useAuthRequest","_useAuthRequestResult","_useAuthRequestResult2"],"sources":["C:\\Users\\Lucas\\Desktop\\Projetos\\Istudy\\node_modules\\expo-auth-session\\src\\AuthRequestHooks.ts"],"sourcesContent":["import { useCallback, useMemo, useEffect, useState } from 'react';\n\nimport { AuthRequest } from './AuthRequest';\nimport { AuthRequestConfig, AuthRequestPromptOptions } from './AuthRequest.types';\nimport { AuthSessionResult } from './AuthSession.types';\nimport { DiscoveryDocument, IssuerOrDiscovery, resolveDiscoveryAsync } from './Discovery';\n\n// @needsAudit\n/**\n * Given an OpenID Connect issuer URL, this will fetch and return the [`DiscoveryDocument`](#discoverydocument)\n * (a collection of URLs) from the resource provider.\n *\n * @param issuerOrDiscovery URL using the `https` scheme with no query or fragment component that the OP asserts as its Issuer Identifier.\n * @return Returns `null` until the [`DiscoveryDocument`](#discoverydocument) has been fetched from the provided issuer URL.\n *\n * @example\n * ```ts\n * const discovery = useAutoDiscovery('https://example.com/auth');\n * ```\n */\nexport function useAutoDiscovery(issuerOrDiscovery: IssuerOrDiscovery): DiscoveryDocument | null {\n  const [discovery, setDiscovery] = useState<DiscoveryDocument | null>(null);\n\n  useEffect(() => {\n    let isAllowed = true;\n    resolveDiscoveryAsync(issuerOrDiscovery).then((discovery) => {\n      if (isAllowed) {\n        setDiscovery(discovery);\n      }\n    });\n\n    return () => {\n      isAllowed = false;\n    };\n  }, [issuerOrDiscovery]);\n\n  return discovery;\n}\n\nexport function useLoadedAuthRequest(\n  config: AuthRequestConfig,\n  discovery: DiscoveryDocument | null,\n  AuthRequestInstance: typeof AuthRequest\n): AuthRequest | null {\n  const [request, setRequest] = useState<AuthRequest | null>(null);\n  const scopeString = useMemo(() => config.scopes?.join(','), [config.scopes]);\n  const extraParamsString = useMemo(\n    () => JSON.stringify(config.extraParams || {}),\n    [config.extraParams]\n  );\n  useEffect(() => {\n    let isMounted = true;\n\n    if (discovery) {\n      const request = new AuthRequestInstance(config);\n      request.makeAuthUrlAsync(discovery).then(() => {\n        if (isMounted) {\n          setRequest(request);\n        }\n      });\n    }\n    return () => {\n      isMounted = false;\n    };\n  }, [\n    discovery?.authorizationEndpoint,\n    config.clientId,\n    config.redirectUri,\n    config.responseType,\n    config.prompt,\n    config.clientSecret,\n    config.codeChallenge,\n    config.state,\n    config.usePKCE,\n    scopeString,\n    extraParamsString,\n  ]);\n  return request;\n}\n\ntype PromptMethod = (options?: AuthRequestPromptOptions) => Promise<AuthSessionResult>;\n\nexport function useAuthRequestResult(\n  request: AuthRequest | null,\n  discovery: DiscoveryDocument | null,\n  customOptions: AuthRequestPromptOptions = {}\n): [AuthSessionResult | null, PromptMethod] {\n  const [result, setResult] = useState<AuthSessionResult | null>(null);\n\n  const promptAsync = useCallback(\n    async ({ windowFeatures = {}, ...options }: AuthRequestPromptOptions = {}) => {\n      if (!discovery || !request) {\n        throw new Error('Cannot prompt to authenticate until the request has finished loading.');\n      }\n      const inputOptions = {\n        ...customOptions,\n        ...options,\n        windowFeatures: {\n          ...(customOptions.windowFeatures ?? {}),\n          ...windowFeatures,\n        },\n      };\n      const result = await request?.promptAsync(discovery, inputOptions);\n      setResult(result);\n      return result;\n    },\n    [request?.url, discovery?.authorizationEndpoint]\n  );\n\n  return [result, promptAsync];\n}\n\n// @needsAudit\n/**\n * Load an authorization request for a code. When the prompt method completes then the response will be fulfilled.\n *\n * > In order to close the popup window on web, you need to invoke `WebBrowser.maybeCompleteAuthSession()`.\n * > See the [Identity example](/guides/authentication#identityserver-4) for more info.\n *\n * If an Implicit grant flow was used, you can pass the `response.params` to `TokenResponse.fromQueryParams()`\n * to get a `TokenResponse` instance which you can use to easily refresh the token.\n *\n * @param config A valid [`AuthRequestConfig`](#authrequestconfig) that specifies what provider to use.\n * @param discovery A loaded [`DiscoveryDocument`](#discoverydocument) with endpoints used for authenticating.\n * Only `authorizationEndpoint` is required for requesting an authorization code.\n *\n * @return Returns a loaded request, a response, and a prompt method in a single array in the following order:\n * - `request` - An instance of [`AuthRequest`](#authrequest) that can be used to prompt the user for authorization.\n *   This will be `null` until the auth request has finished loading.\n * - `response` - This is `null` until `promptAsync` has been invoked. Once fulfilled it will return information about the authorization.\n * - `promptAsync` - When invoked, a web browser will open up and prompt the user for authentication.\n *   Accepts an [`AuthRequestPromptOptions`](#authrequestpromptoptions) object with options about how the prompt will execute.\n *\n * @example\n * ```ts\n * const [request, response, promptAsync] = useAuthRequest({ ... }, { ... });\n * ```\n */\nexport function useAuthRequest(\n  config: AuthRequestConfig,\n  discovery: DiscoveryDocument | null\n): [\n  AuthRequest | null,\n  AuthSessionResult | null,\n  (options?: AuthRequestPromptOptions) => Promise<AuthSessionResult>\n] {\n  const request = useLoadedAuthRequest(config, discovery, AuthRequest);\n  const [result, promptAsync] = useAuthRequestResult(request, discovery);\n  return [request, result, promptAsync];\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
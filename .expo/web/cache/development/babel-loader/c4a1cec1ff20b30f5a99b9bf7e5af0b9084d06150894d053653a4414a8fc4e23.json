{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as AuthSession from 'expo-auth-session';\nimport Loading from \"../components/Loading\";\nimport axios from 'axios';\nimport React from 'react';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport useStoreCache from \"../hooks/useStoreCache\";\nimport ImageGoogle from \"../../assets/ImageAutentication/imageGoogle.svg\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nfunction Google() {\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    visible = _React$useState2[0],\n    setVisible = _React$useState2[1];\n  var _useStoreCache = useStoreCache(),\n    callStoreCache = _useStoreCache.callStoreCache;\n  function SingUpGoogle(_x) {\n    return _SingUpGoogle.apply(this, arguments);\n  }\n  function _SingUpGoogle() {\n    _SingUpGoogle = _asyncToGenerator(function* (user) {\n      setVisible(true);\n      try {\n        var urlCadastrar = \"https://istudy-back-production.up.railway.app/api/v1/user/\";\n        var data = {\n          name: user.name,\n          email: user.email,\n          senha: user.id,\n          image: user.picture\n        };\n        var config = {\n          headers: {\n            Authentication: \"donos_do_codigo\"\n          }\n        };\n        var resposta = yield axios.post(urlCadastrar, data, config);\n        if (resposta.data.status == 200) {\n          var User = {\n            id: resposta.data.data.id,\n            email: resposta.data.data.email,\n            name: resposta.data.data.name,\n            token: resposta.data.token,\n            image: resposta.data.data.image_url,\n            matches: resposta.data.statistics[0].playeds,\n            wins: resposta.data.statistics[0].wins,\n            defeats: resposta.data.statistics[0].loses\n          };\n          callStoreCache(User);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        setVisible(false);\n      }\n    });\n    return _SingUpGoogle.apply(this, arguments);\n  }\n  function handleGoogleSignIn() {\n    return _handleGoogleSignIn.apply(this, arguments);\n  }\n  function _handleGoogleSignIn() {\n    _handleGoogleSignIn = _asyncToGenerator(function* () {\n      try {\n        var Client_ID = \"799907269970-ensptj6ekngvivertamcgf5df9f384dd.apps.googleusercontent.com\";\n        var Redirect_URI = \"https://auth.expo.io/@lucastkp/authApp\";\n        var Scope = encodeURI(\"profile email\");\n        var Response_Type = \"token\";\n        var authUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${Client_ID}&redirect_uri=${Redirect_URI}&response_type=${Response_Type}&scope=${Scope}`;\n        var _yield$AuthSession$st = yield AuthSession.startAsync({\n            authUrl: authUrl\n          }),\n          type = _yield$AuthSession$st.type,\n          params = _yield$AuthSession$st.params;\n        if (type == 'success') {\n          var response = yield fetch(`https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=${params.access_token}`);\n          var user = yield response.json();\n          SingUpGoogle(user);\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    });\n    return _handleGoogleSignIn.apply(this, arguments);\n  }\n  return _jsxs(_Fragment, {\n    children: [_jsx(Loading, {\n      visible: visible\n    }), _jsxs(TouchableOpacity, {\n      style: styles.buttonLogin,\n      onPress: function onPress() {\n        return handleGoogleSignIn();\n      },\n      children: [_jsx(ImageGoogle, {}), _jsx(Text, {\n        style: styles.buttonText,\n        children: \"Entrar com o Google\"\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  buttonLogin: {\n    backgroundColor: \"#FFF\",\n    borderRadius: 20,\n    paddingVertical: 15,\n    paddingHorizontal: 20,\n    width: 262,\n    height: 54,\n    flexDirection: 'row'\n  },\n  buttonText: {\n    fontSize: 16,\n    color: '#004973',\n    marginLeft: 24\n  },\n  buttonGoogle: {\n    alignSelf: 'center'\n  }\n});\nexport default Google;","map":{"version":3,"names":["AuthSession","Loading","axios","React","Image","TouchableOpacity","StyleSheet","Text","useStoreCache","ImageGoogle","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Google","_React$useState","useState","_React$useState2","_slicedToArray","visible","setVisible","_useStoreCache","callStoreCache","SingUpGoogle","_x","_SingUpGoogle","apply","arguments","_asyncToGenerator","user","urlCadastrar","data","name","email","senha","id","image","picture","config","headers","Authentication","resposta","post","status","User","token","image_url","matches","statistics","playeds","wins","defeats","loses","e","console","log","handleGoogleSignIn","_handleGoogleSignIn","Client_ID","Redirect_URI","Scope","encodeURI","Response_Type","authUrl","_yield$AuthSession$st","startAsync","type","params","response","fetch","access_token","json","children","style","styles","buttonLogin","onPress","buttonText","create","backgroundColor","borderRadius","paddingVertical","paddingHorizontal","width","height","flexDirection","fontSize","color","marginLeft","buttonGoogle","alignSelf"],"sources":["C:/Users/Lucas/Desktop/Projetos/Istudy/src/components/Google.jsx"],"sourcesContent":["import * as AuthSession from 'expo-auth-session'\nimport Loading from '../components/Loading'\nimport axios from 'axios';\nimport React from 'react'\nimport {Image, TouchableOpacity, StyleSheet, Text } from 'react-native'\nimport useStoreCache from '../hooks/useStoreCache'\nimport ImageGoogle from '../../assets/ImageAutentication/imageGoogle.svg'\n\nfunction Google() {\n  const [visible, setVisible] = React.useState(false)\n  //Variavel Informação do StoreCache\n  const {callStoreCache} = useStoreCache()\n    async function SingUpGoogle(user){\n        setVisible(true)\n        try{\n          const urlCadastrar = \"https://istudy-back-production.up.railway.app/api/v1/user/\"       \n\n          const data = {\n            name: user.name,\n            email: user.email,\n            senha: user.id,\n            image: user.picture\n          }\n          \n          const config = {\n              headers:{\n                Authentication: \"donos_do_codigo\"\n              }\n          }\n\n          const resposta = await axios.post(urlCadastrar, data, config)\n\n          if (resposta.data.status == 200){\n            const User = {\n              id: resposta.data.data.id,\n              email:resposta.data.data.email,\n              name: resposta.data.data.name,\n              token: resposta.data.token,\n              image: resposta.data.data.image_url,\n              matches: resposta.data.statistics[0].playeds,\n              wins: resposta.data.statistics[0].wins,\n              defeats: resposta.data.statistics[0].loses\n            }\n            callStoreCache(User)\n          }\n          } catch(e)  {\n            \n            console.log(e)\n          } finally {\n            setVisible(false);\n          }\n      }\n\n      async function handleGoogleSignIn(){\n        try{\n          const Client_ID = \"799907269970-ensptj6ekngvivertamcgf5df9f384dd.apps.googleusercontent.com\"\n          const Redirect_URI = \"https://auth.expo.io/@lucastkp/authApp\"\n          const Scope = encodeURI(\"profile email\")\n          const Response_Type = \"token\"\n    \n          const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${Client_ID}&redirect_uri=${Redirect_URI}&response_type=${Response_Type}&scope=${Scope}`\n    \n         const  {type , params} = await AuthSession.startAsync({authUrl});\n    \n         if(type == 'success'){\n          const response = await fetch(`https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=${params.access_token}`)\n          const user = await response.json();\n          SingUpGoogle(user)\n         }\n        }catch(e){\n          console.log(e)\n        }\n      }\n\n  return (\n    <>\n    <Loading visible={visible} />\n    <TouchableOpacity style={styles.buttonLogin} onPress={() => handleGoogleSignIn()}>\n        <ImageGoogle />\n        <Text style={styles.buttonText}>Entrar com o Google</Text>\n    </TouchableOpacity>\n    </>\n  )\n}\n\nconst styles = StyleSheet.create({\n  buttonLogin:{\n  backgroundColor: \"#FFF\",\n  borderRadius: 20,\n  paddingVertical: 15,\n  paddingHorizontal: 20,\n  width: 262,\n  height: 54,\n  flexDirection: 'row',\n  },\n  buttonText:{\n    fontSize: 16,\n    color: '#004973',\n    marginLeft: 24,\n},\nbuttonGoogle:{\n    alignSelf: 'center',\n},\n\n})\n\n\nexport default Google"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useNavigation } from '@react-navigation/native';\nimport useAxios from \"../hooks/useAxios\";\nimport Loading from \"../components/Loading\";\nimport { UserContext } from \"../../App\";\nimport BoxAlert from \"./BoxAlert\";\nimport CodeInput from 'react-native-confirmation-code-input';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function BoxCode(_ref) {\n  var codeEmail = _ref.codeEmail,\n      email = _ref.email,\n      password = _ref.password,\n      name = _ref.name,\n      funcao = _ref.funcao;\n  console.log(codeEmail);\n  var navigation = useNavigation();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState('white'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      bordererror = _useState4[0],\n      setBorderError = _useState4[1];\n\n  var _useAxios = useAxios(),\n      callAxios = _useAxios.callAxios,\n      answerAxios = _useAxios.answerAxios;\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      message = _useState6[0],\n      setMessage = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      code = _useState8[0],\n      setCode = _useState8[1];\n\n  var _useContext = useContext(UserContext),\n      modal = _useContext.modal,\n      setModal = _useContext.setModal,\n      setAlert = _useContext.setAlert;\n\n  useEffect(function () {\n    if (answerAxios.status === 200) {\n      navigation.navigate('SignIn');\n    } else if (answerAxios.status === 201) {\n      setMessage(answerAxios.message);\n    }\n  }, [answerAxios]);\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      visible = _useState10[0],\n      setVisible = _useState10[1];\n\n  function VerifyCode() {\n    var data;\n    return _regeneratorRuntime.async(function VerifyCode$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(code == codeEmail)) {\n              _context.next = 23;\n              break;\n            }\n\n            if (!(funcao === 'Cadastro')) {\n              _context.next = 19;\n              break;\n            }\n\n            data = {\n              name: name,\n              email: email,\n              senha: password\n            };\n            setVisible(true);\n            _context.prev = 4;\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(callAxios(\"user/\", data, \"post\"));\n\n          case 7:\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](4);\n            console.log(_context.t0);\n\n          case 12:\n            _context.prev = 12;\n            setVisible(false);\n            return _context.finish(12);\n\n          case 15:\n            setModal(!modal);\n            codeEmail = null;\n            _context.next = 21;\n            break;\n\n          case 19:\n            setModal(!modal);\n            navigation.navigate('ResetPassword', {\n              email: email,\n              password: password\n            });\n\n          case 21:\n            _context.next = 25;\n            break;\n\n          case 23:\n            setError(true);\n            setBorderError('#FC0004');\n\n          case 25:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[4, 9, 12, 15]], Promise);\n  }\n\n  return _jsxs(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modal,\n    onRequestClose: function onRequestClose() {\n      Alert.alert(\"Modal has been closed.\");\n      setModal(!modal);\n    },\n    children: [_jsx(BoxAlert, {\n      message: message,\n      type: \"erro\"\n    }), _jsxs(TouchableOpacity, {\n      style: styles.buttonSair,\n      onPress: function onPress() {\n        return setModal(!modal);\n      },\n      children: [_jsx(Loading, {\n        visible: visible\n      }), _jsxs(View, {\n        style: {\n          width: 300,\n          height: 308,\n          backgroundColor: '#004973',\n          alignItems: 'center',\n          justifyContent: 'center',\n          borderRadius: 8,\n          borderWidth: 2,\n          borderColor: bordererror\n        },\n        children: [_jsx(Image, {\n          source: {\n            uri: 'https://cdn.discordapp.com/attachments/964683470842499182/999797344465854579/Group_38.png'\n          },\n          style: {\n            width: 60,\n            height: 50\n          }\n        }), _jsx(Text, {\n          style: styles.textWarning,\n          children: \"Enviamos um email de verifica\\xE7\\xE3o, digite o c\\xF3digo:\"\n        }), _jsx(View, {\n          style: styles.divInputCode,\n          children: _jsx(CodeInput, {\n            keyboardType: \"numeric\",\n            className: 'border-b',\n            space: 10,\n            codeLength: 4,\n            size: 30,\n            inputPosition: \"center\",\n            onFulfill: function onFulfill(code) {\n              return setCode(code);\n            }\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.buttonEnviar,\n          onPress: function onPress() {\n            return VerifyCode();\n          },\n          children: _jsx(Text, {\n            style: styles.textButtonEnviar,\n            children: \"Enviar\"\n          })\n        }), error ? _jsx(Text, {\n          style: styles.textError,\n          children: \"O CODIGO DIGITADO ESTA ERRADO, TENTE NOVAMENTE\"\n        }) : _jsx(Text, {\n          style: {\n            display: 'none'\n          }\n        })]\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  buttonSair: {\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.80)'\n  },\n  textError: {\n    color: 'white',\n    width: 200,\n    marginTop: 5,\n    fontSize: 13,\n    textAlign: 'center'\n  },\n  box: {\n    width: 300,\n    height: 308,\n    backgroundColor: '#004973',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 8\n  },\n  divInputCode: {\n    flexDirection: 'row',\n    justifyContent: \"space-between\",\n    width: '80%',\n    marginTop: 15,\n    fontSize: 20\n  },\n  textWarning: {\n    width: 227,\n    fontSize: 20,\n    color: 'white',\n    textAlign: 'center'\n  },\n  inputCode: {\n    width: 40,\n    height: 43,\n    borderRadius: 8,\n    backgroundColor: '#91BDD8',\n    borderWidth: 1,\n    borderColor: '#007FC7',\n    fontSize: 30,\n    textAlign: 'center'\n  },\n  buttonEnviar: {\n    width: 91,\n    height: 32,\n    borderRadius: 8,\n    backgroundColor: '#91BDD8',\n    alignItems: 'center',\n    marginTop: 30\n  },\n  textButtonEnviar: {\n    color: 'black',\n    fontSize: 20\n  }\n});","map":{"version":3,"names":["React","useState","useContext","useEffect","useNavigation","useAxios","Loading","UserContext","BoxAlert","CodeInput","BoxCode","codeEmail","email","password","name","funcao","console","log","navigation","error","setError","bordererror","setBorderError","callAxios","answerAxios","message","setMessage","code","setCode","modal","setModal","setAlert","status","navigate","visible","setVisible","VerifyCode","data","senha","Alert","alert","styles","buttonSair","width","height","backgroundColor","alignItems","justifyContent","borderRadius","borderWidth","borderColor","uri","textWarning","divInputCode","buttonEnviar","textButtonEnviar","textError","display","StyleSheet","create","color","marginTop","fontSize","textAlign","box","flexDirection","inputCode"],"sources":["/home/logic2606/Documentos/Dev/IStudy Project/Istudy-Front/src/components/BoxCode.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { Alert, Modal, StyleSheet, Text, Image, TouchableOpacity, View} from \"react-native\";\nimport { useNavigation } from '@react-navigation/native';\nimport useAxios from '../hooks/useAxios'\nimport Loading from '../components/Loading'\nimport { UserContext } from '../../App';\nimport BoxAlert from './BoxAlert'\nimport CodeInput from 'react-native-confirmation-code-input';\n\n\n\n\nexport default function BoxCode({codeEmail, email, password, name, funcao}) {\n    console.log(codeEmail)\n    //variavel de navegação\n    const navigation = useNavigation();\n    const [error, setError] = useState(false)\n    const [bordererror, setBorderError] = useState('white')\n    //Variavel Informação do axios\n    const { callAxios, answerAxios} = useAxios()\n    //Variavel de mensagem\n    const [message, setMessage] = useState()\n    const [code, setCode] = useState()\n\n    const {modal, setModal, setAlert} = useContext(UserContext)\n    //Variavel do codigo digitado\n\n    useEffect(()=>{\n      if(answerAxios.status === 200){\n        navigation.navigate('SignIn')\n      } else if (answerAxios.status === 201){\n        setMessage(answerAxios.message)\n      }\n    },[answerAxios])\n    \n    //Variavel Loading\n    const [visible, setVisible] = useState(false)\n      //Verifica se o codigo digitado é o enviado no email\n      async function VerifyCode(){ \n        if (code == codeEmail){\n          if(funcao === 'Cadastro'){\n            const data = {\n              name: name,\n              email: email,\n              senha: password\n            }\n            setVisible(true)\n            try{\n              await callAxios (\"user/\", data, \"post\")\n            }catch(e){\n              console.log(e)\n            }finally{\n              setVisible(false)\n            }\n            setModal(!modal)\n            codeEmail = null //Zera o codigo\n          } else {\n          setModal(!modal)\n          navigation.navigate('ResetPassword', {email: email, password:password})\n          }\n        } else {\n          setError(true)\n          setBorderError('#FC0004')\n        }\n      }\n\n\n  return (\n      \n      <Modal\n        animationType=\"slide\"\n        transparent={true}\n        visible={modal}\n        onRequestClose={() => {\n          Alert.alert(\"Modal has been closed.\");\n          setModal(!modal);\n        }}\n      >\n      <BoxAlert message={message} type={\"erro\"}/>\n      <TouchableOpacity style={styles.buttonSair} onPress={() => setModal(!modal)}>\n          <Loading visible={visible} />\n          <View  style={{width: 300,\n    height:308,\n    backgroundColor: '#004973',\n    alignItems: 'center',\n    justifyContent: 'center', \n    borderRadius: 8, borderWidth: 2, borderColor: bordererror}}>\n          <Image source={{uri: 'https://cdn.discordapp.com/attachments/964683470842499182/999797344465854579/Group_38.png'}} style={{width: 60, height: 50}}></Image>\n\n          <Text style={styles.textWarning}>Enviamos um email de verificação, digite o código:</Text>\n\n          <View style={styles.divInputCode}>\n          <CodeInput\n            keyboardType=\"numeric\"\n            className={'border-b'}\n            space={10}\n            codeLength={4}\n            size={30}\n            inputPosition='center'\n            onFulfill={(code) => setCode(code)}\n          />\n          </View>\n            \n          <TouchableOpacity style={styles.buttonEnviar} onPress={() => VerifyCode()}>\n            <Text style={styles.textButtonEnviar}>Enviar</Text>\n          </TouchableOpacity>\n\n          {error ? <Text style={styles.textError}>O CODIGO DIGITADO ESTA ERRADO, TENTE NOVAMENTE</Text> : <Text style={{display: 'none'}}></Text>}\n        </View>\n      </TouchableOpacity>\n      </Modal>\n\n  )\n}\n\nconst styles = StyleSheet.create({\n  buttonSair:{\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.80)',\n  },\n  textError:{\n    color: 'white',\n    width: 200,\n    marginTop: 5,\n    fontSize: 13,\n    textAlign: 'center',\n  },\n  box:{\n    width: 300,\n    height:308,\n    backgroundColor: '#004973',\n    alignItems: 'center',\n    justifyContent: 'center', \n    borderRadius: 8,\n  },\n  divInputCode:{\n    flexDirection: 'row',\n    justifyContent: \"space-between\" ,\n    width: '80%',\n    marginTop: 15,\n    fontSize: 20,\n  },\n  textWarning:{\n    width: 227,\n    fontSize: 20,\n    color: 'white',\n    textAlign: 'center',\n  },\n  inputCode:{\n    width: 40,\n    height: 43,\n    borderRadius: 8,\n    backgroundColor: '#91BDD8',\n    borderWidth: 1, \n    borderColor: '#007FC7',\n    fontSize: 30,\n    textAlign: 'center',\n  },\n  buttonEnviar:{\n    width:91,\n    height:32,\n    borderRadius: 8,\n    backgroundColor: '#91BDD8',\n    alignItems: 'center',\n    marginTop: 30,\n  },\n  textButtonEnviar:{\n    color: 'black',\n    fontSize: 20,\n  }\n\n})\n"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;;;;;;;;AAEA,SAASC,aAAT,QAA8B,0BAA9B;AACA,OAAOC,QAAP;AACA,OAAOC,OAAP;AACA,SAASC,WAAT;AACA,OAAOC,QAAP;AACA,OAAOC,SAAP,MAAsB,sCAAtB;;;AAKA,eAAe,SAASC,OAAT,OAA6D;EAAA,IAA3CC,SAA2C,QAA3CA,SAA2C;EAAA,IAAhCC,KAAgC,QAAhCA,KAAgC;EAAA,IAAzBC,QAAyB,QAAzBA,QAAyB;EAAA,IAAfC,IAAe,QAAfA,IAAe;EAAA,IAATC,MAAS,QAATA,MAAS;EACxEC,OAAO,CAACC,GAAR,CAAYN,SAAZ;EAEA,IAAMO,UAAU,GAAGd,aAAa,EAAhC;;EACA,gBAA0BH,QAAQ,CAAC,KAAD,CAAlC;EAAA;EAAA,IAAOkB,KAAP;EAAA,IAAcC,QAAd;;EACA,iBAAsCnB,QAAQ,CAAC,OAAD,CAA9C;EAAA;EAAA,IAAOoB,WAAP;EAAA,IAAoBC,cAApB;;EAEA,gBAAkCjB,QAAQ,EAA1C;EAAA,IAAQkB,SAAR,aAAQA,SAAR;EAAA,IAAmBC,WAAnB,aAAmBA,WAAnB;;EAEA,iBAA8BvB,QAAQ,EAAtC;EAAA;EAAA,IAAOwB,OAAP;EAAA,IAAgBC,UAAhB;;EACA,iBAAwBzB,QAAQ,EAAhC;EAAA;EAAA,IAAO0B,IAAP;EAAA,IAAaC,OAAb;;EAEA,kBAAoC1B,UAAU,CAACK,WAAD,CAA9C;EAAA,IAAOsB,KAAP,eAAOA,KAAP;EAAA,IAAcC,QAAd,eAAcA,QAAd;EAAA,IAAwBC,QAAxB,eAAwBA,QAAxB;;EAGA5B,SAAS,CAAC,YAAI;IACZ,IAAGqB,WAAW,CAACQ,MAAZ,KAAuB,GAA1B,EAA8B;MAC5Bd,UAAU,CAACe,QAAX,CAAoB,QAApB;IACD,CAFD,MAEO,IAAIT,WAAW,CAACQ,MAAZ,KAAuB,GAA3B,EAA+B;MACpCN,UAAU,CAACF,WAAW,CAACC,OAAb,CAAV;IACD;EACF,CANQ,EAMP,CAACD,WAAD,CANO,CAAT;;EASA,iBAA8BvB,QAAQ,CAAC,KAAD,CAAtC;EAAA;EAAA,IAAOiC,OAAP;EAAA,IAAgBC,UAAhB;;EAEE,SAAeC,UAAf;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA,MACMT,IAAI,IAAIhB,SADd;cAAA;cAAA;YAAA;;YAAA,MAEOI,MAAM,KAAK,UAFlB;cAAA;cAAA;YAAA;;YAGYsB,IAHZ,GAGmB;cACXvB,IAAI,EAAEA,IADK;cAEXF,KAAK,EAAEA,KAFI;cAGX0B,KAAK,EAAEzB;YAHI,CAHnB;YAQMsB,UAAU,CAAC,IAAD,CAAV;YARN;YAAA;YAAA,iCAUcZ,SAAS,CAAE,OAAF,EAAWc,IAAX,EAAiB,MAAjB,CAVvB;;UAAA;YAAA;YAAA;;UAAA;YAAA;YAAA;YAYQrB,OAAO,CAACC,GAAR;;UAZR;YAAA;YAcQkB,UAAU,CAAC,KAAD,CAAV;YAdR;;UAAA;YAgBML,QAAQ,CAAC,CAACD,KAAF,CAAR;YACAlB,SAAS,GAAG,IAAZ;YAjBN;YAAA;;UAAA;YAmBImB,QAAQ,CAAC,CAACD,KAAF,CAAR;YACAX,UAAU,CAACe,QAAX,CAAoB,eAApB,EAAqC;cAACrB,KAAK,EAAEA,KAAR;cAAeC,QAAQ,EAACA;YAAxB,CAArC;;UApBJ;YAAA;YAAA;;UAAA;YAuBIO,QAAQ,CAAC,IAAD,CAAR;YACAE,cAAc,CAAC,SAAD,CAAd;;UAxBJ;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA;;EA6BJ,OAEI,MAAC,KAAD;IACE,aAAa,EAAC,OADhB;IAEE,WAAW,EAAE,IAFf;IAGE,OAAO,EAAEO,KAHX;IAIE,cAAc,EAAE,0BAAM;MACpBU,KAAK,CAACC,KAAN,CAAY,wBAAZ;MACAV,QAAQ,CAAC,CAACD,KAAF,CAAR;IACD,CAPH;IAAA,WASA,KAAC,QAAD;MAAU,OAAO,EAAEJ,OAAnB;MAA4B,IAAI,EAAE;IAAlC,EATA,EAUA,MAAC,gBAAD;MAAkB,KAAK,EAAEgB,MAAM,CAACC,UAAhC;MAA4C,OAAO,EAAE;QAAA,OAAMZ,QAAQ,CAAC,CAACD,KAAF,CAAd;MAAA,CAArD;MAAA,WACI,KAAC,OAAD;QAAS,OAAO,EAAEK;MAAlB,EADJ,EAEI,MAAC,IAAD;QAAO,KAAK,EAAE;UAACS,KAAK,EAAE,GAAR;UACpBC,MAAM,EAAC,GADa;UAEpBC,eAAe,EAAE,SAFG;UAGpBC,UAAU,EAAE,QAHQ;UAIpBC,cAAc,EAAE,QAJI;UAKpBC,YAAY,EAAE,CALM;UAKHC,WAAW,EAAE,CALV;UAKaC,WAAW,EAAE7B;QAL1B,CAAd;QAAA,WAMA,KAAC,KAAD;UAAO,MAAM,EAAE;YAAC8B,GAAG,EAAE;UAAN,CAAf;UAAmH,KAAK,EAAE;YAACR,KAAK,EAAE,EAAR;YAAYC,MAAM,EAAE;UAApB;QAA1H,EANA,EAQA,KAAC,IAAD;UAAM,KAAK,EAAEH,MAAM,CAACW,WAApB;UAAA;QAAA,EARA,EAUA,KAAC,IAAD;UAAM,KAAK,EAAEX,MAAM,CAACY,YAApB;UAAA,UACA,KAAC,SAAD;YACE,YAAY,EAAC,SADf;YAEE,SAAS,EAAE,UAFb;YAGE,KAAK,EAAE,EAHT;YAIE,UAAU,EAAE,CAJd;YAKE,IAAI,EAAE,EALR;YAME,aAAa,EAAC,QANhB;YAOE,SAAS,EAAE,mBAAC1B,IAAD;cAAA,OAAUC,OAAO,CAACD,IAAD,CAAjB;YAAA;UAPb;QADA,EAVA,EAsBA,KAAC,gBAAD;UAAkB,KAAK,EAAEc,MAAM,CAACa,YAAhC;UAA8C,OAAO,EAAE;YAAA,OAAMlB,UAAU,EAAhB;UAAA,CAAvD;UAAA,UACE,KAAC,IAAD;YAAM,KAAK,EAAEK,MAAM,CAACc,gBAApB;YAAA;UAAA;QADF,EAtBA,EA0BCpC,KAAK,GAAG,KAAC,IAAD;UAAM,KAAK,EAAEsB,MAAM,CAACe,SAApB;UAAA;QAAA,EAAH,GAA0F,KAAC,IAAD;UAAM,KAAK,EAAE;YAACC,OAAO,EAAE;UAAV;QAAb,EA1BhG;MAAA,EAFJ;IAAA,EAVA;EAAA,EAFJ;AA8CD;AAED,IAAMhB,MAAM,GAAGiB,UAAU,CAACC,MAAX,CAAkB;EAC/BjB,UAAU,EAAC;IACTE,MAAM,EAAE,MADC;IAETE,UAAU,EAAE,QAFH;IAGTC,cAAc,EAAE,QAHP;IAITF,eAAe,EAAE;EAJR,CADoB;EAO/BW,SAAS,EAAC;IACRI,KAAK,EAAE,OADC;IAERjB,KAAK,EAAE,GAFC;IAGRkB,SAAS,EAAE,CAHH;IAIRC,QAAQ,EAAE,EAJF;IAKRC,SAAS,EAAE;EALH,CAPqB;EAc/BC,GAAG,EAAC;IACFrB,KAAK,EAAE,GADL;IAEFC,MAAM,EAAC,GAFL;IAGFC,eAAe,EAAE,SAHf;IAIFC,UAAU,EAAE,QAJV;IAKFC,cAAc,EAAE,QALd;IAMFC,YAAY,EAAE;EANZ,CAd2B;EAsB/BK,YAAY,EAAC;IACXY,aAAa,EAAE,KADJ;IAEXlB,cAAc,EAAE,eAFL;IAGXJ,KAAK,EAAE,KAHI;IAIXkB,SAAS,EAAE,EAJA;IAKXC,QAAQ,EAAE;EALC,CAtBkB;EA6B/BV,WAAW,EAAC;IACVT,KAAK,EAAE,GADG;IAEVmB,QAAQ,EAAE,EAFA;IAGVF,KAAK,EAAE,OAHG;IAIVG,SAAS,EAAE;EAJD,CA7BmB;EAmC/BG,SAAS,EAAC;IACRvB,KAAK,EAAE,EADC;IAERC,MAAM,EAAE,EAFA;IAGRI,YAAY,EAAE,CAHN;IAIRH,eAAe,EAAE,SAJT;IAKRI,WAAW,EAAE,CALL;IAMRC,WAAW,EAAE,SANL;IAORY,QAAQ,EAAE,EAPF;IAQRC,SAAS,EAAE;EARH,CAnCqB;EA6C/BT,YAAY,EAAC;IACXX,KAAK,EAAC,EADK;IAEXC,MAAM,EAAC,EAFI;IAGXI,YAAY,EAAE,CAHH;IAIXH,eAAe,EAAE,SAJN;IAKXC,UAAU,EAAE,QALD;IAMXe,SAAS,EAAE;EANA,CA7CkB;EAqD/BN,gBAAgB,EAAC;IACfK,KAAK,EAAE,OADQ;IAEfE,QAAQ,EAAE;EAFK;AArDc,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}